{% import "_alerts.twig" as alerts %}
{% if success %}
    {% set level = 'success' %}
    {% if correction %}
        {% set message = 'Your correction has been saved. We will review it as soon as possible.' %}
    {% else %}
        {% set message = 'Your submission has been saved. We will review it as soon as possible.' %}
    {% endif %}
{% endif %}
{% if error == 1 %}
    {% set level = 'danger' %}
    {% set message = 'Something went wrong while submitting.' %}
{% elseif error == 2 %}
    {% set level = 'danger' %}
    {% set message = 'The specified bot ' + username + ' isn't a registered account on Twitch.' %}
{% elseif error == 3 %}
    {% set level = 'info' %}
    {% set message = 'The bot ' + username + ' has already been submitted. Thank you for submitting it again, though!' %}
{% elseif error == 4 %}
    {% set level = 'danger' %}
    {% set message = 'The bot ' + username + ' isn't in our database.' %}
{% else if error == 5 %}
    {% set level = 'danger' %}
    {% set message = 'Type matches the current type if the bot ' + username %}
{% endif %}
{% extends "_base.twig" %}
{% block title %}Submit bot{% endblock %}
{% block extraresources %}
<link rel="stylesheet" type="text/css" href="css/legend.css">
<link rel="canonical" href="https://twitchbots.info/submit">
{% endblock %}
{% block content %}
<div class="page-header">
    <h1>Submit a new bot</h1>
</div>
<p class="lead">If you know about a Twitch account that is used as a helpful chat bot, please tell us about it with the form below and we'll review the information. If we've got wrong date, please switch to "Correction and report what's right. If you have a bigger dataset to submit, please contact us directly.</p>
</div>
{{ alerts.alert(level, message) }}
<div class="panel panel-default">
    <div class="panel-body">
        <form class="form-horizontal" method="post" action="lib/submit">
            <fieldset class="form-group">
                <legend class="col-sm-2 control-label">Submission Type</legend>
                <div class="col-sm-10">
                    <label class="radio-inline">
                        <input type="radio" name="submission-type" value="0" id="new-bot"{% if not correction %} checked{% endif %}>
                        New Bot
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="submission-type" value="1" id="correction"{% if correction %} checked{% endif %}>
                        Correction
                    </label>
                </div>
            </fieldset>
            <div class="form-group">
                <label for="username" class="col-sm-2 control-label">Twitch Username</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="username" name="username" placeholder="Username" value="{{ username|e('html_attr') }}" required>
                </div>
            </div>
            <div class="form-group">
                <label for="existing-type" class="col-sm-2 control-label">Bot Type</label>
                <div class="col-sm-10">
                    <select class="form-control" name="type" id="existing-type">
                        <option value="0">New type&hellip;</option>
                        {% for type in types %}
                            <option value="{{ type.id|e('html_attr') }}">{{ type.name|e }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group" id="bottype">
                <label for="type" class="col-sm-2 control-label">New Type Description</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control col-sm-10" id="type" name="description" placeholder="Type">
                    <p class="help-block">Describe the bot type, normally the name of the software that runs it and if possible a link to the website of it. In case of a bot hosted by a thirdparty this is the name and URL of their site.</p>
                </div>
            </div>
            <div class="form-group" hidden>
                <input type="hidden" value="{{ token|e('html_attr') }}" name="token">
                <input type="hidden" value="PUT" name="_METHOD">
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>
<script src="js/submit.js"></script>
{% endblock %}
